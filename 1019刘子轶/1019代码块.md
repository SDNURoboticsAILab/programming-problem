```yaml

#include <iostream>
#include <vector>
using namespace std;

int countTrans(vector<int> &p)
{
    int n = p.size();
    vector<bool> visited(n, false);
    int transpositions = 0;

    for (int i = 0; i < n; i++)
    {

// 如果已经访问过或已经在正确的位置，跳过它
        if (visited[i] || p[i] == i + 1)
        {
            continue;
        }

        int cycleLength = 0;
        int current = i;

// 持续循环，直到返回到起始元素
        while (!visited[current])
        {
            visited[current] = true;

            //移动到循环中的下一个元素
            current = p[current] - 1;
            cycleLength++;
        }

        // 如果循环长度大于 1,添加cycleLength - 1 个换位
        if (cycleLength > 1)
        {
            transpositions += (cycleLength - 1);
        }
    }

    return transpositions;
}

int main()
{
    vector<int> p = {5, 1, 4, 3, 2};

    int result = countTrans(p);
    cout << result << endl;

    return 0;
}
```yaml
